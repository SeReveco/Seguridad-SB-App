<ion-content id="main-content">
  <div class="page-content">

    <!-- MAPA -->
    <div id="map"></div>

    <!-- Barra flotante: REPORTAR + GPS -->
    <div class="reportar-wrapper">
      <ion-button
        color="primary"
        expand="block"
        class="reportar-btn"
        (click)="abrirFormulario()">
        <ion-icon name="megaphone-outline" slot="start"></ion-icon>
        Reportar
      </ion-button>

      <ion-button
        shape="round"
        color="primary"
        class="gps-btn"
        (click)="goToUbicacionActual()">
        <ion-icon name="locate-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </div>

    <!-- MODAL FORMULARIO -->
    <ion-modal [isOpen]="mostrarFormulario" (didDismiss)="cerrarFormulario()">
      <ng-template>
        <div class="reportar-form-container">
          <form (ngSubmit)="enviarAlerta()" #alertaForm="ngForm">

            <ion-item>
              <ion-label position="floating">Solicitante (opcional)</ion-label>
              <ion-input
                [(ngModel)]="solicitante"
                name="solicitante"
                placeholder="Anónimo si se deja vacío">
              </ion-input>
            </ion-item>

            <ion-item>
              <ion-label position="floating">Tipo de alerta</ion-label>
              <ion-textarea
                [(ngModel)]="tipo"
                name="tipo"
                required>
              </ion-textarea>
            </ion-item>

            <ion-item>
              <ion-label position="floating">Descripción</ion-label>
              <ion-textarea
                [(ngModel)]="descripcion"
                name="descripcion"
                required>
              </ion-textarea>
            </ion-item>

            <div class="form-buttons">
              <ion-button
                type="submit"
                color="primary"
                [disabled]="!alertaForm.form.valid">
                <ion-icon name="megaphone-outline" slot="start"></ion-icon>
                Reportar Alerta
              </ion-button>

              <ion-button
                color="medium"
                (click)="cerrarFormulario()">
                Cancelar
              </ion-button>
            </div>

          </form>
        </div>
      </ng-template>
    </ion-modal>

  </div>
</ion-content>

<!-- FOOTER / NAV -->
<ion-footer>
  <ion-toolbar color="primary">
    <div>
      <div>
        <ion-button
          fill="clear"
          routerLink="/home"
          routerLinkActive="active-tab"
          class="footer-button">
          <ion-icon name="map-outline"></ion-icon>
          <span>Mapa</span>
        </ion-button>
      </div>

      <div>
        <ion-button
          fill="clear"
          routerLink="/alerta"
          routerLinkActive="active-tab"
          class="footer-button">
          <ion-icon name="megaphone-outline"></ion-icon>
          <span>Alerta</span>
        </ion-button>
      </div>

      <div>
        <ion-button
          fill="clear"
          routerLink="/solicitud"
          routerLinkActive="active-tab"
          class="footer-button">
          <ion-icon name="document-text-outline"></ion-icon>
          <span>Solicitud</span>
        </ion-button>
      </div>

      <div>
        <ion-button
          fill="clear"
          (click)="openMenu()"
          class="footer-button">
          <ion-icon name="menu-outline"></ion-icon>
          <span>Menú</span>
        </ion-button>
      </div>
    </div>
  </ion-toolbar>
</ion-footer>
